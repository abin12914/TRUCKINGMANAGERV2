function calculatePurchaseBill(){var a,e=$("#purchase_quantity").val()>0?$("#purchase_quantity").val():0,l=$("#purchase_rate").val()>0?$("#purchase_rate").val():0,t=$("#purchase_discount").val()>0?$("#purchase_discount").val():0,r=$("#purchase_no_of_trip").val()>0?$("#purchase_no_of_trip").val():0,i=0;(a=e*l)>0?($("#purchase_bill").val(a),a-t>0?(tripBill=a-t,i=tripBill*r,$("#purchase_trip_bill").val(tripBill),$("#purchase_total_bill").val(i)):($("#purchase_discount").val(0),$("#purchase_trip_bill").val(a),$("#purchase_total_bill").val(a*r))):($("#purchase_bill").val(0),$("#purchase_discount").val(0),$("#purchase_trip_bill").val(0),$("#purchase_total_bill").val(0))}function calculateSaleBill(){var a,e=$("#sale_quantity").val()>0?$("#sale_quantity").val():0,l=$("#sale_rate").val()>0?$("#sale_rate").val():0,t=$("#sale_discount").val()>0?$("#sale_discount").val():0,r=$("#sale_no_of_trip").val()>0?$("#sale_no_of_trip").val():0,i=0;(a=e*l)>0?($("#sale_bill").val(a),a-t>0?(tripBill=a-t,i=tripBill*r,$("#sale_trip_bill").val(tripBill),$("#sale_total_bill").val(i)):($("#sale_discount").val(0),$("#sale_trip_bill").val(a),$("#sale_total_bill").vl(a*r))):($("#sale_bill").val(0),$("#sale_discount").val(0),$("#sale_trip_bill").val(0),$("#sale_total_bill").val(0))}function purchaseDetailsByCombo(){var a=$("#truck_id").val(),e=$("#source_id").val(),l=$("#material_id").val(),t=$("#supplier_account_id").val();a&&e&&l&&t&&$.ajax({url:"/last/purchase",method:"get",data:{truck_id:a,source_id:e,material_id:l,supplier_account_id:t},success:function(a){if(a&&a.flag){var e=a.measure_type,l=a.quantity,t=a.rate;$("#purchase_measure_type").val(e),$("#purchase_measure_type").trigger("change"),$("#purchase_quantity").val(l),$("#purchase_quantity").trigger("change"),$("#purchase_rate").val(t),$("#purchase_rate").trigger("change")}else $("#purchase_measure_type").val(""),$("#purchase_measure_type").trigger("change"),$("#purchase_quantity").val(""),$("#purchase_quantity").trigger("change"),$("#purchase_rate").val(""),$("#purchase_rate").trigger("change")},error:function(){$("#purchase_measure_type").val(""),$("#purchase_measure_type").trigger("change"),$("#purchase_quantity").val(""),$("#purchase_quantity").trigger("change"),$("#purchase_rate").val(""),$("#purchase_rate").trigger("change")}})}function saleDetailsByCombo(){var a=$("#truck_id").val(),e=$("#destination_id").val(),l=$("#material_id").val(),t=$("#customer_account_id").val();a&&e&&l&&t&&$.ajax({url:"/last/sale",method:"get",data:{truck_id:a,destination_id:e,material_id:l,customer_account_id:t},success:function(a){if(a&&a.flag){var e=a.measure_type,l=a.quantity,t=a.rate;$("#sale_measure_type").val(e),$("#sale_measure_type").trigger("change"),$("#sale_quantity").val(l),$("#sale_quantity").trigger("change"),$("#sale_rate").val(t),$("#sale_rate").trigger("change")}else $("#sale_measure_type").val(""),$("#sale_measure_type").trigger("change"),$("#sale_quantity").val(""),$("#sale_quantity").trigger("change"),$("#sale_rate").val(""),$("#sale_rate").trigger("change")},error:function(){$("#sale_measure_type").val(""),$("#sale_measure_type").trigger("change"),$("#sale_quantity").val(""),$("#sale_quantity").trigger("change"),$("#sale_rate").val(""),$("#sale_rate").trigger("change")}})}$(function(){$("body").on("change keyup","#no_of_trip",function(){$("#purchase_no_of_trip").val($(this).val()),$("#sale_no_of_trip").val($(this).val())});var a=document.location.toString();a.match("#")&&$('.nav-tabs-custom a[href="#'+a.split("#")[1]+'"]').tab("show"),$(".nav-tabs-custom a").on("shown.bs.tab",function(a){window.location.hash=a.target.hash}),$("body").on("click",".arrows",function(){var a=$(this).attr("href");$('li a[href="'+a+'"]').trigger("click")}),$("body").on("change","#supplier_account_id",function(){purchaseDetailsByCombo()}),$("body").on("change","#purchase_measure_type",function(a){var e=$("#purchase_measure_type").val();e&&3==e?($("#purchase_quantity").prop("readonly",!0),$("#purchase_quantity").val(1)):($("#purchase_quantity").prop("readonly",!1),$("#purchase_quantity").val("")),calculatePurchaseBill()}),$("body").on("change","#customer_account_id",function(){saleDetailsByCombo()}),$("body").on("change","#sale_measure_type",function(a){var e=$("#sale_measure_type").val();e&&3==e?($("#sale_quantity").val(1),$("#sale_quantity").prop("readonly",!0)):($("#sale_quantity").prop("readonly",!1),$("#sale_quantity").val("")),calculateSaleBill()}),$("body").on("change keyup","#purchase_quantity",function(a){calculatePurchaseBill()}),$("body").on("change keyup","#purchase_rate",function(a){calculatePurchaseBill()}),$("body").on("change keyup","#purchase_discount",function(a){calculatePurchaseBill()}),$("body").on("change keyup","#sale_quantity",function(a){calculateSaleBill()}),$("body").on("change keyup","#sale_rate",function(a){calculateSaleBill()}),$("body").on("change keyup","#sale_discount",function(a){calculateSaleBill()})});
